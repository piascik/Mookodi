# Mookodi Camera Server

This directory contains the source code for a C++ server with a thrift interface, that uses the CCD library to drive the Mookodi Andor CCD camera.

## Directory structure

* **interface** This contains the thrift interface file, used to generate the thrift interface source code.
* **server** This contains the C++ source code to build the MookodiCameraServer binary.
* **server/interface** This contains the Makefile for building the thrift interface sources. The sources themselves are generated by running the thift interface compiler on the interface file in the **interface** directory.
* **mookodi** This is the head of python2/3 camera client software. The actual camera client's are in the **mookodi/camera/client** directory (the directory structure enabling the clients to be in a sensible package hierarchy).

## Installing the client code

setup.py has to be invoked to install the client side python libraries. This can be invoked like this:

sudo tcsh -c "source /home/dev/src/Mookodi/mookodi_environment.csh; python3 setup.py develop"

## Dependancies / Prerequisites

Currently, the package can be built on Ubuntu 18.04 or Ubuntu 20.04. A version of the Andor SDK2 is required for CCD camera control, and CFITSIO is used to write FITS images.

The server interfaces are written using thrift, which needs to be installed.

Other software packages that were installed on the mookodi machine to facilitate building the camera server include:

* **tcsh** *sudo apt install tcsh* The environment setup script is currently written in tcsh.
* **emacs** *sudo apt-get  install emacs* Used for editing.
* **python-setuptools** *sudo apt-get install python3-setuptools* / *sudo apt-get install python-setuptools* Used whilst installing the python client packages.
* **pip** *sudo apt install python3-pip* Used for requests installation
* **requests** *sudo pip3 install requests* Used by the thrift python libraries.
* **boost** Used by the camera C++ server.
* **log4cxx** Used for logging by the camera C++ server.
* **doxygen** *sudo apt-get install doxygen* *sudo apt-get install graphviz* Used for C library and camera server documentation. You need graphviz for dot, which doxygen attempts to use.
* **plibsys** Installed from https://github.com/saprykin/plibsys . Used to provide config file support.
